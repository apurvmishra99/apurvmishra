<nav class="nav js-nav" role="navigation" aria-label="site" tabindex="-1">

    {# Menu Toggle Button #}
    <button
        class="nav__togglebtn js-nav-toggle"
        aria-expanded="false"
        aria-controls="nav-menu"
        aria-label="toggle menu"
    >
        <span class="menuicon">
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
        </span>
    </button>

    {# Nav Links  #}
    <div class="nav__content">
        <ul class="nav__menu js-nav-menu" id="nav-menu">
        {%- for nav in collections.nav -%}
            {%- set isCurrent = (nav.url == page.url) -%}
            {%- set isParent = nav.url != '/' and nav.url in page.url -%}
		    <li class="nav__item{% if isCurrent or isParent %} nav__item--active{% endif %}">
                <a
                    href="{% if isCurrent %}#main{% else %}{{ nav.url | url }}{% endif %}"
                    class="nav__link"
                    {% if isCurrent %}aria-current="page"{% endif %}
                >
                    <span class="nav__num" aria-hidden="true">0{{ loop.index }}</span>
                    {{ nav.data.navtitle }}
                </a>
            </li>
        {%- endfor -%}
        </ul>
    </div>

    {# Dark Mode Switch #}
    <button
        class="nav__darkmodebtn js-darkmode-toggle"
        title="Toggle Dark Mode"
        role="switch"
        aria-checked="false"
    >
        {% icon "moon" %}
        {% icon "sun" %}
        <span class="sr-only">Toggle Dark Mode</span>
    </button>

    {# Menu BG Animation #}
    <div class="nav__bg theme-dark">
        <div class="nav__bg__circle"></div>
    </div>

</nav>